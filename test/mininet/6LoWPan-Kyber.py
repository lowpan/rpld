#!/usr/bin/env python

import sys

from mininet.log import setLogLevel, info
from mn_wifi.sixLoWPAN.link import LoWPAN
from mn_wifi.cli import CLI
from mn_wifi.net import Mininet_wifi

# RSA keys
s1_rsa_pk =  "2176045891,131073"
s1_rsa_sk = "2176045891,1682770865"

s2_rsa_pk =  "1300148893,131073"
s2_rsa_sk = "1300148893,580502977"

# Kyber keys
s1_kyber_pk = "A3A6197FE1496816A40689A300E3492A6683A1082A79E8AE9D42A17FFA8EF6AC6B785080C056C3D9536721F41113302B8D4328A188A2A302677D761AB6B67A73708481A2201FE50266D1746678786A4BC080187E0A352B2D693C51543CDE0C013B02134B643ECCF01B40B734FE630CE7E9008708CC0898118DCCC8FD9B648FA6589CE8516B46B909715E2263C731637ED367B75A600456927707B781F5D3B2E23168F3E17BB1C0685664B121098893E5250F1A949B110D69C44601902B4CD7A3B6A35FC10B78B397C7CC6A1EC77686EE12C6D88693FAB7132DF684D1947E8ED82818C06F3208BD2DDA339D2505B0BC5C10FC3F37450FD26A4B89F659378094E1C5313A7275D3E2AAB804B414B1C297E804577AB3AE024FE17872BB5AA1925873843679C4FB838AC035E3B3255A0CB7A0A16103A17E97F894C66732EEFC6DCC85CBD60B9642F5A2D2B1706D98721DA0B7F630373E01C78B35937F9C50AC2484F0840BA0D9AAB4861E00808150A616E783213A7A36A0C858A4A299B855C304988C36E10477CB92DB1AAAE9F766BCB101DD80AB84D7044B5904E6925D6E1616D0F37BB77B0641056D14DA5C2F4A16E0A25492C868BDCA56F0C73888C683719BB8B97A2AF5487866B4AD65DC3C82549D9D7861E1BC518DA3B83333B4E15C69128715A41944F688C44704B6AE93AD4C32A85EB862CA7832EB852DF9D53FEEB51B99AC73ADDB4DA94809ABD5B7EA295F1E96983CB61CD2B3AFC33CCA6990555B0352D50A957617CA859A1853E3725FD84711595C1FA423EEF04C7AC68A2EF7A9518C29E513A80AAC7641C34A1519297B0339E72A5F2D502691CA981E368CF77538A12C930B3AC48DAB60B9ECCED1A972891C7CE69ABE759077BDF18F8EC1B4B1DC8EFBB03001A517F4910F6F0711DD573D65F9537833C7EE7B6CDD849E66B016C0E437172A2AEDEB75D0082856131FE787580EF48282D752F6B45159634E00C017CFC539F8BA8EEC6A4CF5E4164C444C12D92ADC397A7189CD431B5FC0F64A320A648235A2BBF5C192BC12D5B54B34F42E1AE9709DB41637F80B6EF1C15E25A3281B3A19BC62C131B73D20A4536B5DD7E412AC726B644C8E606826DEF7A8A6D29EA3928FA9F7C7B4A28E19645C71A9A0D2D40561CA346EF7BC95077030E84DB47C7C7D4164F64822586731B4397672400C4A3AA5FA321248086A57F16B66594CCC452EDDB884B533000BF2AD5C6B363DC396B8B3502A15AC514654577301D4859E18647946B07BC5C48533C2604311A08ED4B7F883BBA4C056741BC1A83116C3280D54083585A4054CD9727B9940BD2BCAF7A2CA4552CC347890034C327069C9EEB222DB204D2EA7C4AF907BA23C62FA1113002574E2507BD5DB9106A130DD138B8827A7489235B2820D83B43F3C746B02D44E78370A1FD717FA1364F3A1912AE79A2DA5540622B686F0A5561C7EDA8739BA53AD38014CAF781261F1AF28F3C5A4DA06019C2969A73E56906A6CE22CFE30BE85EA4B591C1A44863D292445909568F7D3BC192014B0BACE4ECCC888203EFB9570FC4A6B47D7A4F1D30CC770ACA809BB105225C15C0CAD62309E505B73B0825BA85CF5DACFD099AAF8DC47D4A4B97C6CB46CE20DB15E5A2355C45677884F16BD7D69789D0A853D94ADC2659D329CF79519"

s1_kyber_sk = "423710DE5B6D3D1046D32520C33045742A2E11682AAF840BCAA43ECF489E2F94BC9BE0512D6433F993A91AFB18B383C655F126EE4954708C7BD9603190F3CA37307E0FF345FB65800CD8BA4B2A2F5704406220A6F0216F0CA98B05089ECA16AC264A303F974431C20BEC6B1E5671603FD7050E6B9839700EF78B6BBA07A9A3B69F36CC52F2D76097F50CC5160562570BEC009B225039B9DAAD96375089E62CBFB18DB035BB12E08EB7633C5DAAB37725032E426DF9EBC8B2E93EC5AA45602B5B0C2BA4C6A56CE8093344981DDFE9BF84F175D15031317241069480E5E0B148F75F2C19503CF125EE660EB069553648502650CF416B5E661471353595D8FCCE99337DC0FCC440D59867EC56A7D70F3D1772179A9FA4603504551CF29CAAF1F11187097B10B7362A62602474BCBCF5C690756DF4F05B226801B025953C9A1E0C004DA017C7AA101946568F2FE05D1A74A828A81FA663435E8C76BAF6CD0F3CB9435481E5416236A3AC4262B431B87A8EC58D672A12F2C223477833074C08BBB9B1FEC1C40A28AD0F905E529A9C7041311060A80ABB0C3D0A774FC28614D24ED0909635D217B8440CC72B5A5A2B13755A8A85B05F45150E69F398CA796F3919748BA7119CF657307425E4FA88C3583ABBF5C92C5A83A63311B70C25D0E14B498B298C83C2176C44625205E179479D238151CC6C10E0444A211716DA5325679EE37067E75201C3789D5C62937679087E700D91708C845886E58BA5E67A3BEE908E68FA3DD7A56FCE32005DDA59610B7A855212758663680599A93608DB4506E2310AD89798D85377ACE80956EA3D074857B76060DAFA96043BC609843AF4A6BE570964CB249921FB54232C0E4A090CB66CAC3905CA3699B68227680ED4278BFB9B2996AC075B0B10CC003C512589733B1D6B61B34BAC8C875D20883AD06953EFB09DCA61AC0432205B581246891E0B880E77FC4A56B50D7AD09A70A4548BDB126B996A248484D885C07929C773D96471D703B8E3B158012D06F2B8DC3B3CC5246E396AB9C54B48DC71326D1227C0F7394F961F24B0403952BF7D32B54F6044F1FA50CCF85DA0A6204C49B89358307F73AF9786AFFF6A39C25407087A49AC87073F595BDA902D81EBC9E886C76C70BB59F279F639B80290C6F5509EA7301EDB632B2227762E7A337B0B9E3E9162CD41426693B0F9C279CBAAC8ACE2B5B4ECCECC21CD423470D2205B72C3AA95E4290FCA806A7B45031464D177839A909C2DCA63A308B06AC6A24616A3E7D23B9440B74621900E0A96B7C3A8EDD186BC718354C3709E462D5158106834CD2894B7E6383CDAACBE235193C21A93B5F74ED99222CF9CC95281C7D2B01A75253FBD138FE480AB10F11A098CB4D6FC4FF4FB6A42D6388C20945544A08C074A08A639CF13254268685CD9967F80A51E96BB1CBC9F2206844025345F9907DC1A70C37A9EC859367CCBA7960045B77A0C8BB8672CF42E9DD5C1A0D868C1053144366E295512DB9A3B60A931FA6835D777A0D0155CC6EABC42735C9373B2F688280F53BF8DF5628715BFC1F90EFB7544B95771A350CBC32525A5A332C9180E32722756B0B701C410BAB7B3C02B31DE01A109AB925A960C543142A3A6197FE1496816A40689A300E3492A6683A1082A79E8AE9D42A17FFA8EF6AC6B785080C056C3D9536721F41113302B8D4328A188A2A302677D761AB6B67A73708481A2201FE50266D1746678786A4BC080187E0A352B2D693C51543CDE0C013B02134B643ECCF01B40B734FE630CE7E9008708CC0898118DCCC8FD9B648FA6589CE8516B46B909715E2263C731637ED367B75A600456927707B781F5D3B2E23168F3E17BB1C0685664B121098893E5250F1A949B110D69C44601902B4CD7A3B6A35FC10B78B397C7CC6A1EC77686EE12C6D88693FAB7132DF684D1947E8ED82818C06F3208BD2DDA339D2505B0BC5C10FC3F37450FD26A4B89F659378094E1C5313A7275D3E2AAB804B414B1C297E804577AB3AE024FE17872BB5AA1925873843679C4FB838AC035E3B3255A0CB7A0A16103A17E97F894C66732EEFC6DCC85CBD60B9642F5A2D2B1706D98721DA0B7F630373E01C78B35937F9C50AC2484F0840BA0D9AAB4861E00808150A616E783213A7A36A0C858A4A299B855C304988C36E10477CB92DB1AAAE9F766BCB101DD80AB84D7044B5904E6925D6E1616D0F37BB77B0641056D14DA5C2F4A16E0A25492C868BDCA56F0C73888C683719BB8B97A2AF5487866B4AD65DC3C82549D9D7861E1BC518DA3B83333B4E15C69128715A41944F688C44704B6AE93AD4C32A85EB862CA7832EB852DF9D53FEEB51B99AC73ADDB4DA94809ABD5B7EA295F1E96983CB61CD2B3AFC33CCA6990555B0352D50A957617CA859A1853E3725FD84711595C1FA423EEF04C7AC68A2EF7A9518C29E513A80AAC7641C34A1519297B0339E72A5F2D502691CA981E368CF77538A12C930B3AC48DAB60B9ECCED1A972891C7CE69ABE759077BDF18F8EC1B4B1DC8EFBB03001A517F4910F6F0711DD573D65F9537833C7EE7B6CDD849E66B016C0E437172A2AEDEB75D0082856131FE787580EF48282D752F6B45159634E00C017CFC539F8BA8EEC6A4CF5E4164C444C12D92ADC397A7189CD431B5FC0F64A320A648235A2BBF5C192BC12D5B54B34F42E1AE9709DB41637F80B6EF1C15E25A3281B3A19BC62C131B73D20A4536B5DD7E412AC726B644C8E606826DEF7A8A6D29EA3928FA9F7C7B4A28E19645C71A9A0D2D40561CA346EF7BC95077030E84DB47C7C7D4164F64822586731B4397672400C4A3AA5FA321248086A57F16B66594CCC452EDDB884B533000BF2AD5C6B363DC396B8B3502A15AC514654577301D4859E18647946B07BC5C48533C2604311A08ED4B7F883BBA4C056741BC1A83116C3280D54083585A4054CD9727B9940BD2BCAF7A2CA4552CC347890034C327069C9EEB222DB204D2EA7C4AF907BA23C62FA1113002574E2507BD5DB9106A130DD138B8827A7489235B2820D83B43F3C746B02D44E78370A1FD717FA1364F3A1912AE79A2DA5540622B686F0A5561C7EDA8739BA53AD38014CAF781261F1AF28F3C5A4DA06019C2969A73E56906A6CE22CFE30BE85EA4B591C1A44863D292445909568F7D3BC192014B0BACE4ECCC888203EFB9570FC4A6B47D7A4F1D30CC770ACA809BB105225C15C0CAD62309E505B73B0825BA85CF5DACFD099AAF8DC47D4A4B97C6CB46CE20DB15E5A2355C45677884F16BD7D69789D0A853D94ADC2659D329CF795197A49DEA26F62961DEF8A3FCFC679A40BFAA5603E601B848F62C03A1DA67C8202EA58BFB97444D278E61D54AC063A0D5FB52DF9600AECA72579F5F529FCB8B792"

s2_kyber_pk = "BD8B3DE5D002A2B23E86162E021429378438BCA51DD9D11603D30C137A05F610981037C00F757D81C96C25B888B6AB761876646EC901FC36C8AA085157038864E3C308370167F31EA09C86F47101C611A08E389B1EF06A91E037F97437F9793581545E16F1CA46C91BE5A13029106092724D64D1A920C83937D5576EF8560A3066218434B90B463B18A6E483183C993E279A6A9A891AE798227EC9051476895F5CB44097A6C7C65078108B55D77041B1376BAB2E50AA6615744D6126C478D73AE337BE8A3C6B4C694E954B0BD4A6C45BA185C0DABB775C91707A39603581A841CE812134CC605F4411AA0EF8A007904C7EB53FB106C871A729D5B845DC322F9EF818E6A1C8F89B370DDA98EFD69AF9DC6E63869FD9E37415968999668380C312EB4187FB3762583999FD0798AEC24BD252BAA0A3C4BA5BBA048B7E2D01160A1074A120316403155438A14EC1B63720943A0A5842764E622722B58C80C6644768FC4B9B9C43AAB082E752CE952B049C65A79B1357DEEBAB10910E9DCC57D92BA71195029455AE7B0A3F5DC17BA008A565E35D60BAC3ED22B6D347B6421C36A947013A4C6406EC5EA4D490B1EBC846D281496432A6F380E660CDF188B21E1C5E8BA0A634913DEB477B8D6B8C1C734803C603C46C7C435670FC3324F70340C652C1D54A478374539DBB9288736A6EB5A6B5278382F766F13B9AAC38A2DEEB1CCEF4C62F51643D58075D61294EB447690052C3B4ABB9EC46463A35C1140A5FD00B0F457ED2E2B7491B9EDDAA654E7726CCC2ADDA6C938E5CC76AAC02947838238229153B774FA768C8CCA63E268AE44A80C2B7A67454C32F54A13D824C71B0AEDEF7985685AF1FE0219A202F6D2C5F8DD75A1D4648F1A529FC4BC73D4AC5BC072169607FD4122849F8C0AA138BE3503DAD15B4B689011B7221E2A8256C15A269C624BF356032D32FA1852D3D18AACCEA3649736E56A35A6299B794B7B25A6C00D5BB804D5C7BB9E9C3AAE6BBB1735528D27A9571C882F5164699A681FA56B733BEF8A3B474062E5ABAC2E498481310949E8A4C68D012426A04CBD2C58D63A7DE378754EC7FF72A26ABF3084C270D9E36CACD53552C14BF51D91D137AAB72619F51D6B69C064B9F592036B3C3C852630ADC7E986664A7CA9128100CA77576FBA4787B08BC21D43370D5C5B4B17D8CB086C31A65E5A920C1B8CC7D89230631035A36430CF34CAEC132E3A22454E99113BA272DC90BF6537C39242A3BD4A2B3E626038A2BCBDCBF76FAC43A5B50599647AB3C36112CAF2979B1EEB0555821014200C6A13C62F3E48861225AB91B4B589BA47A3AB1710209D9A4B8ED93666E58305412A07B416C0C872151EA8FFCA815E5D41EDA708018734F7D004C7BCC70A469BD90556EC808119188C42A84824EF23DBDFB35BB6441671C9BCB699F9DFC887E69842F2883EB009C0129621BF0AA68BCCF9597366B1C90B7152E4D4C8AE41739A819033FC6A127E8B02C923C4DE13951915F7201951383BFC30629A930872AC2C23A1BB4DC2106F5C82EA8C9B081868CB38028BF0BCF67704DF460AEA893701311B811D9CF89A27B0CB8734FC423A92A6AFE815044BB5AB98C91A83302F98C8EB3639A54D65BB9FB536CD3461F9054969BC3E523C3269B724314A49D361C442247EF74"

s2_kyber_sk ="65026ABCB00382CC842AC7BD94B83F9CFA5D5613A82D171F33C1A3774528767B74BD07548214182AFCC4D0C1489B7C97AA54AA276C4224584DB4B9C20B3938A6A301296922D2C2AE87D943B83BB61B339D91995A8C65B34965361E52AE397560136261A820BB630392ED581F231AAD501CCBD368840880631A5A88B0649B08B12FD1EBAC01164791F70236ECB025D4AE09EC05E6E84380A17E74268B0B7805BF4649601320FC1B4FC03B4EA24C32C85112B5C331172962CD5A24927B179B0CC010BCA50EB17DC7B396E379BE60D9A9A48C0BAA7B24BD84402505ABF0423318CC5F0AC7A46603948D643EA5F6274EA0CC643BAADBF00BB3B36AC3D07CA01B1B42C80F172298B793624AEA3C2BCB7E2664CB560C3BC78182D73775C884214D5025115555935A0599306184B1B79E8353E7C6CADA0490F4385839945F4FB4161CA1B1CEE169D5256E6178B1E2E1926080287707BBFBC72508343D3AA3AD58E75D1354A5A2ECCA5807C5AABAAEA30448EB7231AE922F621B5065B8A7D18C6391F677E3283C8A0C98F858C55B626986251642D89FAF8181F70898D4818A49027A5C14CFAD284FB1611F016B42AA4A73B7290CA0C88D7656184DE85B55C019DC85565B511719983FCA5930658006C6E6A530B982FED9AB5AA2933036B0F6937A75E7921F6B19E5113933CB6CFAB3076FB643E0D2252B68B6A058B401523990F79CEFEACD137C0B51E56F675AB75FB6397C55A81D726BCBC58AE3AA65FCC440439A7D684BC78A0C04AFB172E0D89EFC6478396B7D74BA3494759D5449A973483FBC83ADEA3CC7195C14607A3A4E109208CA4F8D4A0BC8D8575F9AB2E1EB07762B00D2BC1032836D63A5755C3A76F45010F02861157C57DEE24A9C77B44E55A97CA1498207A6D1544438E17902D01F6371C5AFA59E2D424819377032968DAE652B5082C95C441662092269947A5B290857873459B3628FE9AADBF37AC2524321356673D20D976C54C015776E96A386B22F0F0CBEB927B8C805AB464122D64B580A94BD26031CC84739FC2A8B2F79C93A83AFC24B2F5B6731426106116918E8B89F08E19A3B27940129117E351B94C41D1048C59B818FBE1370C7E21DEEA81633F28DB9B96B4D5608CF5298DF7A99C87768D8D67ABC40C7565ABB1C903C54BC10E443C741139B4715126FF9890E86911AA40B621235BFC1C430D861707920EB5312B96572D7E07FD4C02108258E1F071ECDB63E10280F867449FEF4369C143DA51345E699681C557E5727526C3503E1F3C57E7321C38811C7764B15A349FF2A21B982B0DA0089659B9883114D324C608829CA27722114B31B7C708053269021BC14A9350894C23B6EC22709E9B0834401CE34B13FF1C7D7471827A5B4CD24CD57359CE6DBA1B580A061BC46FEC7B553EC5ED51ACA05BC8C02F94959DB31ECD2C46FD3BE80849B9FC622BD6CC6C1533DACC78295CC69C3557E4EB278D2458334E0B0E9F313BEB0CD964707A51C985D9571E65797B5190FDC4335ABC794C8BA5340513B37256E9F495317446605306E9A2469B4B354030228B19461655B55D12210573C6F79A525D3B6666E319C44D87D0FA49D4E617161A917702B157E848EDD65681F38CDBD8B3DE5D002A2B23E86162E021429378438BCA51DD9D11603D30C137A05F610981037C00F757D81C96C25B888B6AB761876646EC901FC36C8AA085157038864E3C308370167F31EA09C86F47101C611A08E389B1EF06A91E037F97437F9793581545E16F1CA46C91BE5A13029106092724D64D1A920C83937D5576EF8560A3066218434B90B463B18A6E483183C993E279A6A9A891AE798227EC9051476895F5CB44097A6C7C65078108B55D77041B1376BAB2E50AA6615744D6126C478D73AE337BE8A3C6B4C694E954B0BD4A6C45BA185C0DABB775C91707A39603581A841CE812134CC605F4411AA0EF8A007904C7EB53FB106C871A729D5B845DC322F9EF818E6A1C8F89B370DDA98EFD69AF9DC6E63869FD9E37415968999668380C312EB4187FB3762583999FD0798AEC24BD252BAA0A3C4BA5BBA048B7E2D01160A1074A120316403155438A14EC1B63720943A0A5842764E622722B58C80C6644768FC4B9B9C43AAB082E752CE952B049C65A79B1357DEEBAB10910E9DCC57D92BA71195029455AE7B0A3F5DC17BA008A565E35D60BAC3ED22B6D347B6421C36A947013A4C6406EC5EA4D490B1EBC846D281496432A6F380E660CDF188B21E1C5E8BA0A634913DEB477B8D6B8C1C734803C603C46C7C435670FC3324F70340C652C1D54A478374539DBB9288736A6EB5A6B5278382F766F13B9AAC38A2DEEB1CCEF4C62F51643D58075D61294EB447690052C3B4ABB9EC46463A35C1140A5FD00B0F457ED2E2B7491B9EDDAA654E7726CCC2ADDA6C938E5CC76AAC02947838238229153B774FA768C8CCA63E268AE44A80C2B7A67454C32F54A13D824C71B0AEDEF7985685AF1FE0219A202F6D2C5F8DD75A1D4648F1A529FC4BC73D4AC5BC072169607FD4122849F8C0AA138BE3503DAD15B4B689011B7221E2A8256C15A269C624BF356032D32FA1852D3D18AACCEA3649736E56A35A6299B794B7B25A6C00D5BB804D5C7BB9E9C3AAE6BBB1735528D27A9571C882F5164699A681FA56B733BEF8A3B474062E5ABAC2E498481310949E8A4C68D012426A04CBD2C58D63A7DE378754EC7FF72A26ABF3084C270D9E36CACD53552C14BF51D91D137AAB72619F51D6B69C064B9F592036B3C3C852630ADC7E986664A7CA9128100CA77576FBA4787B08BC21D43370D5C5B4B17D8CB086C31A65E5A920C1B8CC7D89230631035A36430CF34CAEC132E3A22454E99113BA272DC90BF6537C39242A3BD4A2B3E626038A2BCBDCBF76FAC43A5B50599647AB3C36112CAF2979B1EEB0555821014200C6A13C62F3E48861225AB91B4B589BA47A3AB1710209D9A4B8ED93666E58305412A07B416C0C872151EA8FFCA815E5D41EDA708018734F7D004C7BCC70A469BD90556EC808119188C42A84824EF23DBDFB35BB6441671C9BCB699F9DFC887E69842F2883EB009C0129621BF0AA68BCCF9597366B1C90B7152E4D4C8AE41739A819033FC6A127E8B02C923C4DE13951915F7201951383BFC30629A930872AC2C23A1BB4DC2106F5C82EA8C9B081868CB38028BF0BCF67704DF460AEA893701311B811D9CF89A27B0CB8734FC423A92A6AFE815044BB5AB98C91A83302F98C8EB3639A54D65BB9FB536CD3461F9054969BC3E523C3269B724314A49D361C442247EF74F9B0AA3D5F576777FCAEED8105888AAF71E1BA3E907123F4B6F79D6A5F14B6BE6A11128FFBA14D8EEC7456B53B084FFBEE1BAB193F116035553D3B29FE4486F3"

"""This example creates a simple network topology with 4 nodes

       sensor1 (root)
      /       \
    /          \
sensor2      sensor3
               |
               |
             sensor4
"""


def topology():
    "Create a network."
    net = Mininet_wifi(iot_module='mac802154_hwsim')
    info("*** Creating nodes\n")
    
    # Without encryption
    # sensor1 = net.addSensor('sensor1', ip6='fe80::1/64', panid='0xbeef',
    #                         dodag_root=True, storing_mode=2)
    
    # sensor2 = net.addSensor('sensor2', ip6='fe80::2/64', panid='0xbeef',
    #                         storing_mode=2)
    
    # With RSA Encryption
    # sensor1 = net.addSensor('sensor1', ip6='fe80::1/64', panid='0xbeef',
    #                         dodag_root=True, storing_mode=2, 
    #                         public_key=s1_rsa_pk, secret_key=s1_rsa_sk, enc_mode=1)
    
    # sensor2 = net.addSensor('sensor2', ip6='fe80::2/64', panid='0xbeef',
    #                         storing_mode=2, public_key=s2_rsa_pk, secret_key=s2_rsa_sk, enc_mode=1)

    # With Kyber Encryption
    sensor1 = net.addSensor('sensor1', ip6='fe80::1/64', panid='0xbeef',
                            dodag_root=True, storing_mode=2, 
                            public_key=s1_kyber_pk, secret_key=s1_kyber_sk, enc_mode=2)
    sensor2 = net.addSensor('sensor2', ip6='fe80::2/64', panid='0xbeef',
                            storing_mode=2, public_key=s2_kyber_pk, secret_key=s2_kyber_sk, enc_mode=2)


    info("*** Configuring nodes\n")
    net.configureNodes()

    info("*** Adding links\n")
    net.addLink(sensor1, sensor2, cls=LoWPAN)

    info("*** Starting network\n")
    net.build()

    if '-r' in sys.argv:
        info("*** Configuring RPLD\n")
        net.configRPLD(net.sensors)

    info("*** Running CLI\n")
    CLI(net)

    info("*** Stopping network\n")
    net.stop()


if __name__ == '__main__':
    setLogLevel('info')
    topology()
